# =============================================================================
# UAT (USER ACCEPTANCE TESTING) PROFILE CONFIGURATION
# =============================================================================
# This profile is used for UAT environment

# Database Configuration - UAT


spring.datasource.url=${DB_URL:jdbc:postgresql://dpg-d4vamcruibrs73d43v90-a.oregon-postgres.render.com/dynamicplatform}
spring.datasource.username=${DB_USERNAME:dynamicplatform_user}
spring.datasource.password=${DB_PASSWORD:GRUZI5nNQZpOkuFCdkihA6fdPUCamoEK}

# Connection Pool Configuration - UAT
spring.datasource.hikari.maximum-pool-size=${DB_POOL_SIZE:20}
spring.datasource.hikari.minimum-idle=${DB_MIN_IDLE:5}
spring.datasource.hikari.connection-timeout=${DB_CONNECTION_TIMEOUT:30000}
spring.datasource.hikari.idle-timeout=${DB_IDLE_TIMEOUT:600000}
spring.datasource.hikari.max-lifetime=${DB_MAX_LIFETIME:1800000}

# JPA Configuration - UAT
spring.jpa.hibernate.ddl-auto=${JPA_DDL_AUTO:update}
spring.jpa.show-sql=${JPA_SHOW_SQL:false}
spring.jpa.properties.hibernate.format_sql=${JPA_FORMAT_SQL:false}

# Logging Configuration - UAT (Moderate logging)
logging.level.com.platform=${LOG_LEVEL_APP:INFO}
logging.level.org.springframework.security=${LOG_LEVEL_SECURITY:WARN}
logging.level.org.springframework.web=${LOG_LEVEL_WEB:WARN}
logging.level.org.hibernate.SQL=${LOG_LEVEL_SQL:WARN}
logging.level.root=${LOG_LEVEL_ROOT:INFO}

# Logging Pattern and File Configuration
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level [%logger{36}] - %msg%n
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level [%logger{36}] - %msg%n
logging.file.name=${LOG_FILE_PATH:/var/log/dynamic-platform/application.log}
logging.file.max-size=${LOG_FILE_MAX_SIZE:100MB}
logging.file.max-history=${LOG_FILE_MAX_HISTORY:30}

# Swagger Configuration - UAT (Enabled but restricted)
springdoc.api-docs.path=/api-docs
springdoc.swagger-ui.path=/swagger-ui.html
springdoc.swagger-ui.enabled=${SWAGGER_ENABLED:true}
springdoc.swagger-ui.operationsSorter=method
springdoc.swagger-ui.tagsSorter=alpha

# CORS Configuration - UAT
cors.allowed-origins=${CORS_ORIGINS:https://salahatwa.github.io,https://dynamic-platform-api-latest.onrender.com}
cors.allowed-methods=GET,POST,PUT,DELETE,OPTIONS,PATCH
cors.allowed-headers=Authorization,Content-Type,X-Requested-With
cors.allow-credentials=true

# Cache Configuration - UAT
spring.cache.type=${CACHE_TYPE:caffeine}
spring.cache.caffeine.spec=maximumSize=1000,expireAfterWrite=300s

# Security Configuration - UAT
security.require-ssl=${REQUIRE_SSL:true}
server.ssl.enabled=${SSL_ENABLED:false}

# Actuator Configuration - UAT (Limited endpoints)
management.endpoints.web.exposure.include=${ACTUATOR_ENDPOINTS:health,info,metrics}
management.endpoint.health.show-details=when-authorized
management.info.env.enabled=true

# Profile indicator
app.environment=uat
app.debug.enabled=${DEBUG_ENABLED:false}

# Performance Configuration
server.tomcat.max-threads=${TOMCAT_MAX_THREADS:200}
server.tomcat.min-spare-threads=${TOMCAT_MIN_THREADS:10}
server.tomcat.max-connections=${TOMCAT_MAX_CONNECTIONS:8192}

# =============================================================================
# IRONPDF CONFIGURATION - UAT
# =============================================================================

# IronPDF enabled for UAT testing (can be disabled if not needed)
ironpdf.enabled=${IRONPDF_ENABLED:true}
ironpdf.license-key=${IRONPDF_LICENSE_KEY:}

# Use external engine for UAT (better performance)
ironpdf.use.external.engine=${IRONPDF_USE_EXTERNAL_ENGINE:false}
ironpdf.engine.url=${IRONPDF_ENGINE_URL:}
ironpdf.engine.timeout=${IRONPDF_ENGINE_TIMEOUT:60000}

# Embedded engine configuration (fallback)
ironpdf.timeout=${IRONPDF_TIMEOUT:30000}
ironpdf.chrome-gpu-mode=${IRONPDF_CHROME_GPU_MODE:disabled}
ironpdf.headless=${IRONPDF_HEADLESS:true}
ironpdf.no-sandbox=${IRONPDF_NO_SANDBOX:true}

# =============================================================================
# PLAYWRIGHT CONFIGURATION - UAT
# =============================================================================

# Playwright enabled for UAT testing
playwright.enabled=${PLAYWRIGHT_ENABLED:true}
playwright.timeout=${PLAYWRIGHT_TIMEOUT:30000}
playwright.headless=${PLAYWRIGHT_HEADLESS:true}
playwright.no-sandbox=${PLAYWRIGHT_NO_SANDBOX:true}
playwright.disable-gpu=${PLAYWRIGHT_DISABLE_GPU:true}

# External service can be enabled for UAT testing
playwright.use.external.service=${PLAYWRIGHT_USE_EXTERNAL_SERVICE:false}
playwright.service.url=${PLAYWRIGHT_SERVICE_URL:}
playwright.service.timeout=${PLAYWRIGHT_SERVICE_TIMEOUT:60000}

# =============================================================================
# GOTENBERG CONFIGURATION - UAT
# =============================================================================

# Gotenberg enabled for UAT testing
gotenberg.enabled=${GOTENBERG_ENABLED:true}
gotenberg.service.url=${GOTENBERG_SERVICE_URL:http://gotenberg:3000}
gotenberg.service.timeout=${GOTENBERG_SERVICE_TIMEOUT:60000}

# PDF Generation Service Configuration
pdf.engine=${PDF_ENGINE:gotenberg}