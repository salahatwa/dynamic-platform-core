# =============================================================================
# PRODUCTION PROFILE CONFIGURATION
# =============================================================================
# This profile is used for production environment

# Database Configuration - Production
spring.datasource.url=${DB_URL}
spring.datasource.username=${DB_USERNAME}
spring.datasource.password=${DB_PASSWORD}

# Connection Pool Configuration - Production (Optimized)
spring.datasource.hikari.maximum-pool-size=${DB_POOL_SIZE:50}
spring.datasource.hikari.minimum-idle=${DB_MIN_IDLE:10}
spring.datasource.hikari.connection-timeout=${DB_CONNECTION_TIMEOUT:30000}
spring.datasource.hikari.idle-timeout=${DB_IDLE_TIMEOUT:600000}
spring.datasource.hikari.max-lifetime=${DB_MAX_LIFETIME:1800000}
spring.datasource.hikari.leak-detection-threshold=${DB_LEAK_DETECTION:60000}

# JPA Configuration - Production (Strict)
spring.jpa.hibernate.ddl-auto=${JPA_DDL_AUTO:update}
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=false
spring.jpa.properties.hibernate.generate_statistics=${JPA_STATISTICS:false}

# Logging Configuration - Production (Minimal logging)
logging.level.com.platform=${LOG_LEVEL_APP:WARN}
logging.level.org.springframework.security=${LOG_LEVEL_SECURITY:ERROR}
logging.level.org.springframework.web=${LOG_LEVEL_WEB:ERROR}
logging.level.org.hibernate.SQL=ERROR
logging.level.root=${LOG_LEVEL_ROOT:WARN}

# Logging Pattern and File Configuration
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level [%logger{36}] - %msg%n
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level [%logger{36}] - %msg%n
logging.file.name=${LOG_FILE_PATH:/var/log/dynamic-platform/application.log}
logging.file.max-size=${LOG_FILE_MAX_SIZE:100MB}
logging.file.max-history=${LOG_FILE_MAX_HISTORY:90}

# Swagger Configuration - Production (Disabled by default)
springdoc.api-docs.enabled=${SWAGGER_ENABLED:true}
springdoc.swagger-ui.enabled=${SWAGGER_ENABLED:true}

# CORS Configuration - Production (Strict)
cors.allowed-origins=${CORS_ORIGINS}
cors.allowed-methods=GET,POST,PUT,DELETE,OPTIONS,PATCH
cors.allowed-headers=Authorization,Content-Type,X-Requested-With
cors.allow-credentials=true

# Cache Configuration - Production (Optimized)
spring.cache.type=${CACHE_TYPE:caffeine}
spring.cache.caffeine.spec=maximumSize=10000,expireAfterWrite=600s

# Security Configuration - Production (Strict)
#security.require-ssl=true
#server.ssl.enabled=${SSL_ENABLED:true}
#server.ssl.key-store=${SSL_KEYSTORE_PATH}
#server.ssl.key-store-password=${SSL_KEYSTORE_PASSWORD}
#server.ssl.key-store-type=${SSL_KEYSTORE_TYPE:PKCS12}

# Actuator Configuration - Production (Minimal endpoints)
management.endpoints.web.exposure.include=${ACTUATOR_ENDPOINTS:health,info}
management.endpoint.health.show-details=never
management.info.env.enabled=false
management.security.enabled=true

# Profile indicator
app.environment=production
app.debug.enabled=false

# Performance Configuration - Production (Optimized)
server.tomcat.max-threads=${TOMCAT_MAX_THREADS:300}
server.tomcat.min-spare-threads=${TOMCAT_MIN_THREADS:25}
server.tomcat.max-connections=${TOMCAT_MAX_CONNECTIONS:10000}
server.tomcat.accept-count=${TOMCAT_ACCEPT_COUNT:100}

# Compression Configuration
server.compression.enabled=true
server.compression.mime-types=text/html,text/xml,text/plain,text/css,text/javascript,application/javascript,application/json
server.compression.min-response-size=1024

# Session Configuration
server.servlet.session.timeout=${SESSION_TIMEOUT:30m}
server.servlet.session.cookie.secure=true
server.servlet.session.cookie.http-only=true

# Error Handling
server.error.include-stacktrace=never
server.error.include-message=never