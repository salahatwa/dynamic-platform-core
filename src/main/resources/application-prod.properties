# =============================================================================
# PRODUCTION PROFILE CONFIGURATION
# =============================================================================
# This profile is used for production environment

# Database Configuration - Production
spring.datasource.url=${DB_URL}
spring.datasource.username=${DB_USERNAME}
spring.datasource.password=${DB_PASSWORD}

# Connection Pool Configuration - Production (Optimized)
spring.datasource.hikari.maximum-pool-size=${DB_POOL_SIZE:50}
spring.datasource.hikari.minimum-idle=${DB_MIN_IDLE:10}
spring.datasource.hikari.connection-timeout=${DB_CONNECTION_TIMEOUT:30000}
spring.datasource.hikari.idle-timeout=${DB_IDLE_TIMEOUT:600000}
spring.datasource.hikari.max-lifetime=${DB_MAX_LIFETIME:1800000}
spring.datasource.hikari.leak-detection-threshold=${DB_LEAK_DETECTION:60000}

# JPA Configuration - Production (Strict)
spring.jpa.hibernate.ddl-auto=${JPA_DDL_AUTO:update}
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=false
spring.jpa.properties.hibernate.generate_statistics=${JPA_STATISTICS:false}

# Logging Configuration - Production (Minimal logging)
logging.level.com.platform=${LOG_LEVEL_APP:WARN}
logging.level.org.springframework.security=${LOG_LEVEL_SECURITY:ERROR}
logging.level.org.springframework.web=${LOG_LEVEL_WEB:ERROR}
logging.level.org.hibernate.SQL=ERROR
logging.level.root=${LOG_LEVEL_ROOT:WARN}

# Logging Pattern and File Configuration
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level [%logger{36}] - %msg%n
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level [%logger{36}] - %msg%n
logging.file.name=${LOG_FILE_PATH:/var/log/dynamic-platform/application.log}
logging.file.max-size=${LOG_FILE_MAX_SIZE:100MB}
logging.file.max-history=${LOG_FILE_MAX_HISTORY:90}

# Swagger Configuration - Production (Disabled by default)
springdoc.api-docs.enabled=${SWAGGER_ENABLED:true}
springdoc.swagger-ui.enabled=${SWAGGER_ENABLED:true}

# CORS Configuration - Production (Strict)
cors.allowed-origins=${CORS_ORIGINS}
cors.allowed-methods=GET,POST,PUT,DELETE,OPTIONS,PATCH
cors.allowed-headers=Authorization,Content-Type,X-Requested-With
cors.allow-credentials=true

# Cache Configuration - Production (Optimized)
spring.cache.type=${CACHE_TYPE:caffeine}
spring.cache.caffeine.spec=maximumSize=10000,expireAfterWrite=600s

# Security Configuration - Production (Strict)
#security.require-ssl=true
#server.ssl.enabled=${SSL_ENABLED:true}
#server.ssl.key-store=${SSL_KEYSTORE_PATH}
#server.ssl.key-store-password=${SSL_KEYSTORE_PASSWORD}
#server.ssl.key-store-type=${SSL_KEYSTORE_TYPE:PKCS12}

# Actuator Configuration - Production (Minimal endpoints)
management.endpoints.web.exposure.include=${ACTUATOR_ENDPOINTS:health,info}
management.endpoint.health.show-details=never
management.info.env.enabled=false
management.security.enabled=true

# Media Configuration - Production
media.local.base-path=${MEDIA_BASE_PATH:/app/storage}
media.local.base-url=${MEDIA_BASE_URL:https://api.profily.site/api/media/files}
media.storage.host=${STORAGE_HOST:https://api.profily.site}

# Profile indicator
app.environment=production
app.debug.enabled=false

# Performance Configuration - Production (Optimized)
server.tomcat.max-threads=${TOMCAT_MAX_THREADS:300}
server.tomcat.min-spare-threads=${TOMCAT_MIN_THREADS:25}
server.tomcat.max-connections=${TOMCAT_MAX_CONNECTIONS:10000}
server.tomcat.accept-count=${TOMCAT_ACCEPT_COUNT:100}

# Compression Configuration
server.compression.enabled=true
server.compression.mime-types=text/html,text/xml,text/plain,text/css,text/javascript,application/javascript,application/json
server.compression.min-response-size=1024

# Session Configuration
server.servlet.session.timeout=${SESSION_TIMEOUT:30m}
server.servlet.session.cookie.secure=true
server.servlet.session.cookie.http-only=true

# Error Handling
server.error.include-stacktrace=never
server.error.include-message=never

# =============================================================================
# IRONPDF CONFIGURATION - PRODUCTION
# =============================================================================

# IronPDF Engine Configuration
ironpdf.enabled=${IRONPDF_ENABLED:true}
ironpdf.license-key=${IRONPDF_LICENSE_KEY:IRONSUITE.SALAHSAYEDATWA.GMAIL.COM.6053-62A8B2268E-DSR46CQMYQLOQD-GRH3HZVXGNRW-TCI2DXVHNFR3-JY5I5ETTYO6G-DRTB6EIBAEEX-IQDJOLR5DXKG-6QI7AT-TTJMQSIXSHSQUA-DEPLOYMENT.TRIAL-3W44KS.TRIAL.EXPIRES.15.JAN.2026}

# External Engine Configuration (RECOMMENDED for production)
# When enabled, NO local dependencies are downloaded - uses external Docker service
ironpdf.use.external.engine=${IRONPDF_USE_EXTERNAL_ENGINE:false}
ironpdf.engine.url=${IRONPDF_ENGINE_URL:}
ironpdf.engine.timeout=${IRONPDF_ENGINE_TIMEOUT:60000}

# Embedded Engine Configuration (fallback - downloads dependencies on first use)
# Only used when ironpdf.use.external.engine=false
ironpdf.timeout=${IRONPDF_TIMEOUT:30000}
ironpdf.chrome-gpu-mode=${IRONPDF_CHROME_GPU_MODE:disabled}
ironpdf.linux-chrome-path=${IRONPDF_LINUX_CHROME_PATH:}
ironpdf.headless=${IRONPDF_HEADLESS:true}
ironpdf.no-sandbox=${IRONPDF_NO_SANDBOX:true}

# =============================================================================
# PLAYWRIGHT CONFIGURATION - PRODUCTION
# =============================================================================

# Playwright Engine Configuration
playwright.enabled=${PLAYWRIGHT_ENABLED:true}

# External Service Configuration (RECOMMENDED for production)
# When enabled, NO local dependencies are downloaded - uses external Docker service
playwright.use.external.service=${PLAYWRIGHT_USE_EXTERNAL_SERVICE:false}
playwright.service.url=${PLAYWRIGHT_SERVICE_URL:}
playwright.service.timeout=${PLAYWRIGHT_SERVICE_TIMEOUT:60000}

# Embedded Service Configuration (fallback - downloads dependencies on first use)
# Only used when playwright.use.external.service=false
playwright.timeout=${PLAYWRIGHT_TIMEOUT:30000}
playwright.headless=${PLAYWRIGHT_HEADLESS:true}
playwright.no-sandbox=${PLAYWRIGHT_NO_SANDBOX:true}
playwright.disable-gpu=${PLAYWRIGHT_DISABLE_GPU:true}

# =============================================================================
# GOTENBERG CONFIGURATION - PRODUCTION
# =============================================================================

# Gotenberg Engine Configuration (FREE alternative to IronPDF)
gotenberg.enabled=${GOTENBERG_ENABLED:true}
gotenberg.service.url=${GOTENBERG_SERVICE_URL:http://gotenberg:3000}
gotenberg.service.timeout=${GOTENBERG_SERVICE_TIMEOUT:60000}

# Paper configuration (A4 size in inches)
gotenberg.paper.width=${GOTENBERG_PAPER_WIDTH:8.27}
gotenberg.paper.height=${GOTENBERG_PAPER_HEIGHT:11.7}

# Margins configuration (in inches)
gotenberg.margins.top=${GOTENBERG_MARGINS_TOP:0.39}
gotenberg.margins.bottom=${GOTENBERG_MARGINS_BOTTOM:0.39}
gotenberg.margins.left=${GOTENBERG_MARGINS_LEFT:0.39}
gotenberg.margins.right=${GOTENBERG_MARGINS_RIGHT:0.39}

# Additional options
gotenberg.print.background=${GOTENBERG_PRINT_BACKGROUND:true}
gotenberg.wait.delay=${GOTENBERG_WAIT_DELAY:1000}

# PDF Generation Service Configuration
pdf.engine=${PDF_ENGINE:gotenberg}